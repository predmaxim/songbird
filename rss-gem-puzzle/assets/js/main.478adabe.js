document.addEventListener("DOMContentLoaded",(()=>{new class{constructor(e){this.setting=e,this.frameSize=this.setting.frameSize,this.itemSize=this.setting.itemSize,this.playField=[],this.movesElem=document.querySelector(this.setting.moves),this.wrap=document.querySelector(this.setting.wrap),this.startBtn=document.querySelector(this.setting.startBtn),this.stopBtn=document.querySelector(this.setting.stopBtn),this.saveBtn=document.querySelector(this.setting.saveBtn),this.resultBtn=document.querySelector(this.setting.resultBtn),this.timerElem=document.querySelector(this.setting.timerElem),this.frameSizeInfo=document.querySelector(this.setting.frameSizeInfo),this.frameSizeBtns=document.querySelectorAll(this.setting.frameSizeBtns),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.isGame=!1,this.time=0,this.info={best:{time:{minutes:0,seconds:0},moves:0},moves:0,currentTime:{minutes:0,seconds:0},frameSize:0},this.init()}init(){this.restore(),this.numbers(),window.addEventListener("resize",(()=>{window.innerWidth<1024?(this.itemSize=window.innerWidth/(this.frameSize+2.5),this.drawCanvas()):this.itemSize=this.setting.itemSize})),document.addEventListener("click",(e=>{e.target==this.startBtn&&(this.start(),document.querySelector(".message")&&document.querySelector(".message").remove()),e.target==this.stopBtn&&this.stop(),e.target==this.saveBtn&&this.save(),e.target==this.resultBtn&&this.result(),e.target.classList.contains("frame-size")&&(this.frameSize=+e.target.dataset.action,this.frameSizeInfo.textContent=`${+e.target.dataset.action}x${+e.target.dataset.action}`,this.info.frameSize=this.frameSize,this.stop(),this.numbers(),this.drawCanvas(),this.isGame=!1)})),setTimeout((()=>{this.drawCanvas()}),0)}numbers(){const e=Array(this.frameSize*this.frameSize).fill().map(((e,t)=>t)).sort((()=>Math.random()-.5)),t=[];for(;t.length<this.frameSize;)t.push(e.splice(0,this.frameSize));return this.playField=t,t}restore(){localStorage.getItem("info")&&(this.info=JSON.parse(localStorage.getItem("info")),this.timerElem.textContent=`${String(this.info.currentTime.minutes).length<2?0:""}${this.info.currentTime.minutes}:${String(this.info.currentTime.seconds).length<2?0:""}${this.info.currentTime.seconds}`,this.frameSize=this.info.frameSize,this.frameSizeInfo.textContent=`${this.info.frameSize}x${this.info.frameSize}`)}drawCanvas(){window.innerWidth<1024?this.itemSize=window.innerWidth/(this.frameSize+2.5):this.itemSize=this.setting.itemSize,this.ctx=this.canvas.getContext("2d"),this.canvas.classList.add("game"),this.canvas.width=this.frameSize*this.itemSize,this.canvas.height=this.frameSize*this.itemSize,this.wrap.insertAdjacentElement("afterbegin",this.canvas);for(let e=0;e<this.frameSize;e++){e==this.frameSize&&e++;for(let t=0;t<this.frameSize;t++)this.ctx.save(),this.ctx.translate(t*this.itemSize,e*this.itemSize),this.ctx.strokeStyle="#e2e2e2",this.ctx.strokeRect(0,0,this.itemSize,this.itemSize),this.ctx.font="20px sans-serif",this.ctx.textAlign="center",this.ctx.fillText(this.playField[e][t],this.itemSize/2,this.itemSize/2+8),this.ctx.restore()}}message(e,t){const s=`\n      <div class="message ${e||""}">\n        <div class="message__header"><b>YOUR RESULTS</b></div>\n        <div class="message__frame-size">Frame size: ${this.info.frameSize}x${this.info.frameSize}</div>\n        <div class="message__time">Time: ${String(this.info.currentTime.minutes).length<2?0:""}${this.info.currentTime.minutes}:${String(this.info.currentTime.seconds).length<2?0:""}${this.info.currentTime.seconds}</div>\n        <div class="message__moves">Moves: ${this.info.moves}</div>\n        <div class="message__moves"><b>Best result:</b> Moves: ${this.info.best.moves} | Time: ${String(this.info.best.time.minutes).length<2?0:""}${this.info.best.time.minutes}:${String(this.info.best.time.seconds).length<2?0:""}${this.info.best.time.seconds}</div>\n        <button class="message__button">Close</button>\n      </div>`,i=`\n      <div class="message ${e||""}">\n        <div class="message__body">${t}</div>\n        <button class="message__button">Close</button>\n      </div>`;document.querySelector(".message")&&document.querySelector(".message").remove(),"result"==e?this.wrap.insertAdjacentHTML("afterbegin",s):this.wrap.insertAdjacentHTML("afterbegin",i),document.querySelector(".message__button").addEventListener("click",(()=>document.querySelector(".message").remove()))}save(){localStorage.setItem("info",JSON.stringify(this.info)),console.log("Game saved")}start(){1==this.isGame&&this.stop(),this.drawCanvas(),this.newGame(),this.timer(),this.isGame=!0,console.log("New game started")}stop(){clearInterval(this.time),this.numbers(),this.movesElem.textContent=0,this.timerElem.textContent="00:00",this.isGame=!1,console.log("Game stopped")}result(){this.message("result")}timer(){console.log("Timer Started");let e=0,t=0;this.time=setInterval((()=>{59==t&&(e+=1,t=0),t+=1,this.timerElem.textContent=`${String(e).length<2?0:""}${e}:${String(t).length<2?0:""}${t}`,this.info.currentTime={minutes:e,seconds:t}}),1e3)}newGame(){return this}}({wrap:".game-container",frameSize:4,itemSize:90,startBtn:".start",stopBtn:".stop",saveBtn:".save",resultBtn:".result",timerElem:".timer span",moves:".moves span",frameSizeBtns:".frame-size",frameSizeInfo:".frame-size-info span"})}));
//# sourceMappingURL=main.478adabe.js.map